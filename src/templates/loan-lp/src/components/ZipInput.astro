---
interface Props {
  label?: string;
  placeholder?: string;
}

const {
  label = 'Your ZIP code',
  placeholder = '12345',
} = Astro.props;
---

<div class="w-full">
  <label for="zip-input" class="block text-sm font-semibold text-foreground mb-2">{label}</label>
  <input
    type="text"
    id="zip-input"
    name="zip"
    inputmode="numeric"
    pattern="[0-9]{5}"
    maxlength="5"
    placeholder={placeholder}
    autocomplete="postal-code"
    class="w-full h-12 px-4 text-lg font-medium text-center rounded-[var(--radius)] border border-input bg-card text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:border-transparent transition-colors"
    aria-label={label}
    aria-describedby="zip-hint"
  />
  <p id="zip-hint" class="mt-1 text-xs text-muted-foreground text-center">5-digit US ZIP code</p>
</div>

<script is:inline>
  (function() {
    var input = document.getElementById('zip-input');
    if (!input) return;
    input.addEventListener('input', function() {
      this.value = this.value.replace(/\D/g, '').slice(0, 5);
      if (this.value.length === 5) sessionStorage.setItem('zip', this.value);
    });
    var stored = sessionStorage.getItem('zip');
    if (stored && stored.length === 5) input.value = stored;
  })();
</script>
